#!/usr/bin/env bash
# Installs and configures Nginx to serve a page containing 'Holberton School'

# Exit immediately if a command exits with a non-zero status
set -e

# Update package list and install nginx
apt-get update -y
apt-get install -y nginx

# Make sure nginx is running (without systemctl)
service nginx start

# Replace the default index.html with the required content
echo "Holberton School for the win!" > /var/www/html/index.html

# Ensure nginx is listening on port 80 (default config usually does)
# But weâ€™ll confirm and restart nginx
grep -q "listen 80" /etc/nginx/sites-available/default || sed -i 's/listen [0-9]* default_server;/listen 80 default_server;/' /etc/nginx/sites-available/default

# Restart nginx to apply configuration (without systemctl)
service nginx restart
